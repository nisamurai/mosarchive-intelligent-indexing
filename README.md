#  MosArchive Intelligent Indexing | Сервис извлечения и индексирования информации из образов архивных документов

Веб-сервис с применением средств искусственного интеллекта для автоматизированного извлечения данных из образов архивных документов, их индексирования и наполнения базы данных.

> Код проекта спецально обогащён комментариями для быстрого погружения в суть реализации

## Технологии

- **Frontend**: React 19 + TypeScript
- **Backend**: Python
- **Сборщик**: Vite
- **Стили**: Tailwind CSS
- **Иконки**: Lucide React
- **Пакетный менеджер**: Bun

## Установка и запуск

1. Перейдите в директорию проекта:
```bash
cd mosarchive-intelligent-indexing
```

2. Установите зависимости:
```bash
bun install
```

3. Запустите сервер разработки (выберите один из вариантов):

**Вариант 1 (рекомендуется):**
```bash
bunx vite
```

**Вариант 2 (через скрипт):**
```bash
bun run dev
```

**Вариант 3 (альтернативный порт):**
```bash
bunx vite --port 3000
```

4. Откройте браузер и перейдите по адресу:
   - `http://localhost:5173` (стандартный порт)
   - `http://localhost:3000` (если используете альтернативный порт)

## Компонент UploadComponent

### Описание

React-компонент для загрузки документов с поддержкой:
- Drag-and-drop интерфейса
- Выбора одиночных и множественных файлов
- Валидации форматов (JPG, JPEG, TIFF, PDF)
- Прогресс-бара загрузки
- Обработки ошибок

### Использование

```tsx
import UploadComponent from './components/UploadComponent';

function App() {
  const handleUpload = (files: File[]) => {
    console.log('Загружены файлы:', files);
    // Ввызов ИИ для обработки документов
  };

  return (
    <UploadComponent 
      onUpload={handleUpload}
      maxFiles={20}
      maxFileSize={100 * 1024 * 1024} // 100MB
    />
  );
}
```

### Пропсы

- `onUpload: (files: File[]) => void` - callback функция, вызываемая после загрузки файлов
- `maxFiles?: number` - максимальное количество файлов (по умолчанию 10)
- `maxFileSize?: number` - максимальный размер файла в байтах (по умолчанию 50MB)
- `className?: string` - дополнительные CSS классы

### Состояние компонента

```typescript
interface FileWithProgress {
  file: File;           // Исходный файл
  id: string;           // Уникальный идентификатор
  progress: number;     // Прогресс загрузки (0-100)
  status: 'pending' | 'uploading' | 'completed' | 'error';
  error?: string;       // Сообщение об ошибке
}
```

### Обработчики событий

- `handleDragOver` - обработка перетаскивания над зоной
- `handleDragLeave` - обработка выхода из зоны перетаскивания
- `handleDrop` - обработка сброса файлов
- `handleFileSelect` - обработка выбора файлов через input
- `handleFiles` - основная логика обработки файлов
- `removeFile` - удаление файла из списка
- `handleUpload` - запуск процесса загрузки

## Структура проекта

```
src/
├── components/
│   └── UploadComponent.tsx    # Основной компонент загрузки
├── lib/
│   ├── image_processing.py    # Модуль предобработки изображений
│   ├── attribute_recognition.py # Модуль атрибутивного распознавания
│   └── utils.ts              # Утилиты (cn функция для Tailwind)
├── App.tsx                   # Главный компонент приложения
├── main.tsx                  # Точка входа
└── index.css                 # Глобальные стили

documentation/
├── README_image_processing.md # Документация модуля обработки изображений
└── README_attribute_recognition.md # Документация модуля атрибутивного распознавания
requirements.txt              # Python зависимости для модуля обработки
```

## Особенности реализации

1. **Валидация файлов**: Проверка формата и размера файлов
2. **Прогресс-бар**: Визуализация процесса загрузки
3. **Обработка ошибок**: Понятные сообщения об ошибках
4. **Адаптивный дизайн**: Работает на всех устройствах
5. **Accessibility**: 
   - Поддержка клавиатурной навигации (Tab, Enter, Пробел)
   - ARIA-атрибуты для скрин-ридеров
   - Семантическая разметка
   - Focus-индикаторы для кнопок

## Модуль предобработки изображений

Проект включает Python модуль для предобработки изображений документов с заглушками функций:
- Выравнивание (deskew)
- Коррекция контрастности
- Шумоподавление
- Бинаризация
- Коррекция перспективы
- Улучшение разрешения

**[Подробная документация модуля](documentation/README_image_processing.md)**

## Модуль атрибутивного распознавания

Система извлечения структурированных метаданных из текста архивных документов:
- ФИО, даты, адреса
- Архивные шифры
- Номера документов, организации
- Подсветка найденных атрибутов в UI

**[Подробная документация модуля](documentation/README_attribute_recognition.md)**

### Установка Python зависимостей

```bash
pip install -r requirements.txt
```

## Заглушки для ИИ

В текущей версии все вызовы ИИ заменены заглушками:
- Загрузка файлов симулируется с задержкой
- Обработка документов выводится в консоль
- В будущем здесь будут реальные вызовы API ИИ

## Сборка для продакшена

```bash
bun run build
```

Собранные файлы будут в папке `dist/`.